<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<body>
    <div id="app">


    <div style="width: 100%;height: 70px;margin-bottom: 20px;" class="border">

        cart <b>{{ cart }}</b>
    </div>
    <section>

            <div class="container" style="width:800px;">
                <div class="product row">

                    <div class="product-image col">
                        <img class="border" :src="image" style="width: 400px;">
                    </div>

                    <div class="product-info col">
                        <h1>{{ title }}</h1>
                        
                        <div class="detail">
                            <ul>
                                <li v-for="d in detail">{{ d }}</li>
                            </ul>
                        </div>

                        <div>
                            <ul style="list-style: none; ">
                                <li v-for="variant in variants" :key="variant.variantId" :style="{ background: variant.variantColor, margin: '0 2px' }"
                                    class="badge text-white">
                                    <span @mouseover="updateProduct(variant.image, variant.inventory)">{{ variant.variantColor|capitalize }}</span>
                                </li>
                            </ul>
                        </div>

                        <div>
                            <p v-if="inventory > 10">In Stock {{inventory}}</p>
                            <p v-else-if="inventory <= 10 && inventory > 0">Almost sold out! {{inventory}}</p>
                            <p v-else>Out of Stock {{inventory}}</p>
                        </div>

                        <div>
                            <button class="btn bg-primary text-white" @click="addToCart">add to cart</button>
                        </div>

                    </div>

                </div>

            </div>
    </section>
    </div>
</body>
<script>
    Vue.filter('capitalize', function (value) {
    if (!value) return ''
    value = value.toString()
    return value.charAt(0).toUpperCase() + value.slice(1)
    })

    var app = new Vue({
        el: '#app',
        data: {
            cart: 0,
            inventory: 0,
            brand: 'Tuture-o',
            product: 'XABCX',
            title: null,
            image: null,
            detail: ['oisiiiiii 100%', 'strong OOOOOOOOOOOOOO 100%', 'Gender-neutral XXXXXXXXXXXXXXXXX'],
            variants: [
                {
                    variantId: 101,
                    variantColor: "green",
                    image: 'https://future-connect.co.jp/images/top_short_bnr03.png',
                    inventory: 11,
                },
                {
                    variantId: 102,
                    variantColor: "black",
                    image: 'https://future-connect.co.jp/images/top_short_bnr20.png',
                    inventory: 10
                }
            ]
        },
        methods:{
            addToCart(){
                if(this.inventory > 0){
                    this.inventory -= 1;
                    this.cart += 1;
                }
            },
            updateProduct(updateImage,updateInventory){
                this.image = updateImage;
                this.inventory = updateInventory;
            }
        },
        mounted() {
            this.title = this.brand + ' ' + this.product;
            this.image = this.variants[0].image;
            this.inventory = this.variants[0].inventory;
        }
    })
</script>